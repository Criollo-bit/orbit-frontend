<div class="dashboard-container">
  
  <header class="top-bar">
    <div class="logo">ORBIT LOGISTICS <span class="badge">V2.0</span></div>
    <div class="system-status">
      <span class="live-dot"></span> SISTEMA EN L√çNEA
      <span class="clock">{{ currentTime | date:'HH:mm:ss' }}</span>
    </div>
  </header>

  <div class="main-content">
    
    <aside class="sidebar glass-panel">
      <div class="sidebar-header">
        <h3>Env√≠os Activos</h3>
        <button class="btn-add" (click)="toggleModal()">+</button>
      </div>
      <div class="search-box">
        <input type="text" placeholder="üîç Buscar ID..." [(ngModel)]="searchTerm">
      </div>
      
      <div class="shipment-list">
        <div *ngFor="let ship of filteredShipments" class="shipment-card" 
             [class.active]="selectedShipment === ship" (click)="selectShipment(ship)">
          <div class="card-header">
            <span class="ship-id">{{ ship.id }}</span>
            <span class="status-badge" [style.color]="getStatusColor(ship.status)" [style.border-color]="getStatusColor(ship.status)">{{ ship.status }}</span>
          </div>
          <div class="route">{{ ship.origin }} ‚ûù {{ ship.destination }}</div>
        </div>
      </div>
    </aside>

    <main class="map-area">
      <div id="map"></div> <div class="map-overlay">
        LAT: {{ selectedShipment?.coords?.lat || '0.00' }} | LNG: {{ selectedShipment?.coords?.lng || '0.00' }}
      </div>
    </main>

    <aside class="details-panel glass-panel" *ngIf="!selectedShipment">
      <h2>RESUMEN GLOBAL</h2>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="val">{{ stats.total }}</div>
          <label>TOTAL</label>
        </div>
        <div class="stat-card">
          <div class="val" style="color:var(--neon-green)">{{ stats.done }}</div>
          <label>ENTREGADOS</label>
        </div>
        <div class="stat-card">
          <div class="val" style="color:var(--neon-blue)">{{ stats.transit }}</div>
          <label>EN RUTA</label>
        </div>
        <div class="stat-card">
          <div class="val" style="color:var(--neon-orange)">{{ stats.alert }}</div>
          <label>ALERTAS</label>
        </div>
      </div>

      <div class="alert-box">
        <h4>üîî Alertas Recientes</h4>
        <ul>
          <li>Tormenta en Atl√°ntico Norte.</li>
          <li>Retraso portuario en Shanghai.</li>
        </ul>
      </div>
    </aside>

    <aside class="details-panel glass-panel" *ngIf="selectedShipment">
      <div class="panel-header">
        <h2>DETALLES</h2>
        <button class="btn-close" (click)="closeDetails()">‚úï</button>
      </div>

      <div class="shipment-header">
        <span class="big-icon" *ngIf="selectedShipment.type === 'sea'">üö¢</span>
        <span class="big-icon" *ngIf="selectedShipment.type === 'air'">‚úàÔ∏è</span>
        <span class="big-icon" *ngIf="selectedShipment.type === 'land'">üöõ</span>
        <div>
          <h1>{{ selectedShipment.id }}</h1>
          <span [style.color]="getStatusColor(selectedShipment.status)">{{ selectedShipment.status }}</span>
        </div>
      </div>

      <div class="timeline">
        <div class="timeline-item" *ngFor="let event of selectedShipment.timeline">
          <div class="dot" [class.done]="event.done"></div>
          <div class="content">
            <span class="time">{{ event.time }}</span>
            <span class="text">{{ event.event }}</span>
          </div>
        </div>
      </div>

      <div class="info-row">
        <label>Carga:</label> <span>{{ selectedShipment.descripcion }}</span>
      </div>
      <div class="info-row">
        <label>ETA:</label> <span>{{ selectedShipment.fechaEntrega }}</span>
      </div>
    </aside>

  </div>
</div>

<div class="modal-overlay" *ngIf="showModal">
  <div class="modal-content glass-panel">
    <h2>NUEVO ENV√çO</h2>
    <div class="form-group"><label>Origen</label><input [(ngModel)]="newOrder.origin"></div>
    <div class="form-group"><label>Destino</label><input [(ngModel)]="newOrder.destination"></div>
    <div class="form-group"><label>Tipo</label>
      <select [(ngModel)]="newOrder.type">
        <option value="sea">Mar√≠timo</option><option value="air">A√©reo</option><option value="land">Terrestre</option>
      </select>
    </div>
    <div class="modal-actions">
      <button class="btn-cancel" (click)="toggleModal()">CANCELAR</button>
      <button class="btn-save" (click)="createShipment()">CREAR</button>
    </div>
  </div>
</div>